{
    "@context": [
        "https://www.w3.org/2019/wot/td/v1"
    ],
    "title": "PowerMeterThing",
    "id": "urn:dev:ops:power-meter-002",
    "properties": {
        "device1Power": {
            "type": "number"
        },
        "device2Power": {
            "type": "number"
        },
        "totalPower": {
            "type": "number",
            "readOnly": true,
            "otv2:jsonLogic": {
                "+": [
                    {
                        "var": "device1Power"
                    },
                    {
                        "var": "device2Power"
                    }
                ]
            }
        }
    },
    "links": [
        {
            "rel": "otv2:hasPart",
            "href": "https://example.com/things/urn:dev:ops:power-device-001",
            "type": "application/td+json"
        },
        {
            "rel": "otv2:hasPart",
            "rel.name": "",
            "href": "https://example.com/things/urn:dev:ops:power-device-002",
            "type": "application/td+json"
        }
    ],
    "otv2:subscribedEvents": [
        {
            "otv2:event": "power01.changed",
            "otv2:type": "application/json"
        },
        {
            "otv2:event": "power02.changed",
            "otv2:source": [
                "urn:dev:ops:power-device-002"
            ],
            "otv2:autoEmitState": true
        }
    ],
    "otv2:rules": {
        "onDevice1Event": {
            "otv2:if": {
                "==": [
                    {
                        "var": "eventName"
                    },
                    "thing:power01.changed"
                ]
            },
            "otv2:then": {
                "otv2:updateState": {
                    "device1Power": {
                        "value": {
                            "var": "payload.power.value"
                        }
                    }
                }
            }
        },
        "onDevice2Event": {
            "otv2:if": {
                "==": [
                    {
                        "var": "eventName"
                    },
                    "thing:power02.changed"
                ]
            },
            "otv2:then": {
                "otv2:updateState": {
                    "device2Power": {
                        "value": {
                            "var": "payload.power.value"
                        },
                        "timestamp": {
                            "var": "payload.power.lastUpdate"
                        }
                    }
                }
            }
        }
    }
}